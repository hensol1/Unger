<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Defense Stats Interactive Chart</title>
    <!-- Include Plotly.js library for interactive charts:contentReference[oaicite:1]{index=1} -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 960px;
            margin: auto;
            padding: 20px;
        }
        h1, h2 {
            text-align: center;
            color: #2c3e50;
        }
        #controls {
            text-align: center;
            margin-bottom: 10px;
        }
        select {
            margin: 0 10px;
            padding: 5px 10px;
            font-size: 16px;
        }
        #chart {
            width: 100%;
            height: 600px;
        }
        #info {
            margin-top: 20px;
            border: 1px solid #ccc;
            background: #fff;
            padding: 10px;
        }
        #info h3 {
            margin-top: 0;
        }
        #ron-insights {
            background: #eef;
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
        }
        #ron-insights ul {
            list-style-type: disc;
            padding-left: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Defense Stats Interactive Scatter Plot</h1>
        <p>Select two defensive stats from the dropdowns below to compare players. Click on a player point to see detailed info. The player <strong>Ron Unger</strong> is highlighted in gold star markers.</p>
        <div id="controls">
            X-axis:
            <select id="x-axis-select">
                <option value="GM">Games (GM)</option>
                <option value="Min">Minutes (Min)</option>
                <option value="Age">Age</option>
                <option value="Tckl">Tackles/Game (Tckl)</option>
                <option value="Tackle%">Tackle Success %</option>
                <option value="Clrnce">Clearances/Game (Clrnce)</option>
                <option value="Int">Interceptions/Game (Int)</option>
                <option value="ShtBlk">Shots Blocked/Game (ShtBlk)</option>
                <option value="Duels">Duels/Game (Duels)</option>
                <option value="Duel%">Duel Win %</option>
                <option value="Aerials">Aerials/Game (Aerials)</option>
                <option value="Aerial%">Aerial Win %</option>
                <option value="Recovery">Recoveries/Game</option>
                <option value="ErrShot">Errors (ErrShot)</option>
                <option value="CrossBlkd">Crosses Blocked</option>
            </select>
            Y-axis:
            <select id="y-axis-select">
                <option value="GM">Games (GM)</option>
                <option value="Min">Minutes (Min)</option>
                <option value="Age">Age</option>
                <option value="Tckl">Tackles/Game (Tckl)</option>
                <option value="Tackle%">Tackle Success %</option>
                <option value="Clrnce">Clearances/Game (Clrnce)</option>
                <option value="Int">Interceptions/Game (Int)</option>
                <option value="ShtBlk">Shots Blocked/Game (ShtBlk)</option>
                <option value="Duels">Duels/Game (Duels)</option>
                <option value="Duel%">Duel Win %</option>
                <option value="Aerials">Aerials/Game (Aerials)</option>
                <option value="Aerial%">Aerial Win %</option>
                <option value="Recovery">Recoveries/Game</option>
                <option value="ErrShot">Errors (ErrShot)</option>
                <option value="CrossBlkd">Crosses Blocked</option>
            </select>
        </div>
        <div id="chart"></div>
        <div id="info"><h3>Player Info</h3><p>Click on a point to see details here.</p></div>
        <div id="ron-insights">
            <h2>Ron Unger Insights</h2>
            <ul>
                <li><strong>Position:</strong> Right Back; <strong>Games:</strong> 10; <strong>Minutes:</strong> 776; <strong>Age:</strong> 23</li>
                <li><strong>Tackles/Game:</strong> 1.16; <strong>Tackle Success:</strong> 25.0% (among lowest in dataset)</li>
                <li><strong>Clearances/Game:</strong> 2.32 (around average); <strong>Interceptions/Game:</strong> 1.39 (slightly above average)</li>
                <li><strong>Aerial Win %:</strong> 52.9% (wins more than half his aerial duels)</li>
                <li><strong>Recoveries/Game:</strong> 3.60; <strong>Errors:</strong> 0 (no recorded errors)</li>
                <li><strong>Crosses Blocked/Game:</strong> 0.12 (low)</li>
            </ul>
        </div>
    </div>
    <script>
        // Convert CSV data to a JavaScript array of player objects (embedded from the file)
        const players = /* CSV data as JSON array */ { /* ...player objects... */ };

        function drawChart(xStat, yStat) {
            // Extract values for the selected stats
            const xValues = players.map(p => p[xStat]);
            const yValues = players.map(p => p[yStat]);
            // Marker style: gold star for Ron Unger, blue circle for others
            const markerColors = players.map(p => 
                (p.firstName === "Ron" && p.lastName === "Unger") ? 'gold' : 'steelblue'
            );
            const markerSizes = players.map(p =>
                (p.firstName === "Ron" && p.lastName === "Unger") ? 15 : 8
            );
            const markerSymbols = players.map(p =>
                (p.firstName === "Ron" && p.lastName === "Unger") ? 'star' : 'circle'
            );
            // Create Plotly scatter trace
            const trace = {
                x: xValues,
                y: yValues,
                mode: 'markers',
                type: 'scatter',
                marker: {
                    color: markerColors,
                    size: markerSizes,
                    symbol: markerSymbols,
                    line: { width: 1, color: '#333' }
                },
                text: players.map(p => p.firstName + " " + p.lastName),
                hovertemplate: '%{text}<br>' + xStat + ': %{x}<br>' + yStat + ': %{y}<extra></extra>'
            };
            const layout = {
                title: `Player ${yStat} vs ${xStat}`,
                xaxis: { title: xStat },
                yaxis: { title: yStat }
            };
            Plotly.newPlot('chart', [trace], layout);
        }

        // Initial plot with default axes
        drawChart('GM', 'Tckl');

        // Redraw chart when dropdowns change
        document.getElementById('x-axis-select').addEventListener('change', () => {
            drawChart(
                document.getElementById('x-axis-select').value,
                document.getElementById('y-axis-select').value
            );
        });
        document.getElementById('y-axis-select').addEventListener('change', () => {
            drawChart(
                document.getElementById('x-axis-select').value,
                document.getElementById('y-axis-select').value
            );
        });

        // Show player info when a point is clicked
        document.getElementById('chart').on('plotly_click', function(data) {
            const point = data.points[0];
            const idx = point.pointIndex;
            const player = players[idx];
            // Populate the info panel with all stats for this player
            document.getElementById('info').innerHTML = `
                <h3>${player.firstName} ${player.lastName}</h3>
                <p><strong>Position:</strong> ${player.Position}</p>
                <p><strong>Games (GM):</strong> ${player.GM}</p>
                <p><strong>Minutes:</strong> ${player.Min}</p>
                <p><strong>Age:</strong> ${player.Age}</p>
                <p><strong>Tackles/Game:</strong> ${player.Tckl}</p>
                <p><strong>Tackle Success %:</strong> ${player["Tackle%"]}%</p>
                <p><strong>Clearances/Game:</strong> ${player.Clrnce}</p>
                <p><strong>Interceptions/Game:</strong> ${player.Int}</p>
                <p><strong>Shots Blocked/Game:</strong> ${player.ShtBlk}</p>
                <p><strong>Duels/Game:</strong> ${player.Duels}</p>
                <p><strong>Duel Win %:</strong> ${player["Duel%"]}%</p>
                <p><strong>Aerials/Game:</strong> ${player.Aerials}</p>
                <p><strong>Aerial Win %:</strong> ${player["Aerial%"]}%</p>
                <p><strong>Recoveries/Game:</strong> ${player.Recovery}</p>
                <p><strong>Errors (ErrShot):</strong> ${player.ErrShot}</p>
                <p><strong>Crosses Blocked:</strong> ${player.CrossBlkd}</p>
            `;
        });
    </script>
</body>
</html>
